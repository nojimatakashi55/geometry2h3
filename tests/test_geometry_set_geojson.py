# tests/test_geometry_set_wkt.py
import pytest
from geometry2h3.geometry import Geometry

def test_geometry_set_geojson():
        geojson = {
            "type": "Polygon",
            "coordinates": [
                [
                    (135.51394, 34.647321),
                    (135.500722, 34.650187),
                    (135.493042, 34.654178),
                    (135.495265, 34.666438),
                    (135.479976, 34.665518),
                    (135.462608, 34.669165),
                    (135.466791, 34.682663),
                    (135.474868, 34.688974),
                    (135.494977, 34.701909),
                    (135.494977, 34.701909),
                    (135.512136, 34.704934),
                    (135.520324, 34.70492),
                    (135.532171, 34.697043),
                    (135.534482, 34.68858),
                    (135.533846, 34.681101),
                    (135.53283, 34.673526),
                    (135.529925, 34.665247),
                    (135.527889, 34.65855),
                    (135.52337, 34.647879),
                    (135.51394, 34.647321)
                ],
                [
                    (135.48207498835222, 34.685407567708744),
                    (135.4909122264798, 34.690097962056754),
                    (135.49408445287045, 34.69249263147169),
                    (135.50144949234883, 34.6932584506999),
                    (135.50629627480748, 34.692629723093226),
                    (135.51057386216462, 34.69111697544301),
                    (135.51275290190603, 34.69131079777771),
                    (135.50874553858216, 34.692407539999515),
                    (135.50482441687262, 34.69392971851826),
                    (135.50116202012492, 34.694416620643146),
                    (135.49133621800263, 34.69343335903617),
                    (135.48748983903636, 34.69171262310632),
                    (135.48207498835222, 34.685407567708744)
                ]
            ]
        }

        g = Geometry(h3_resolution=7)
        g.set_geojson(geojson)
        g.fill_h3()

        assert len(g.geoms) == 1
        assert g.geoms[0].geom_type == "Polygon"
        assert len(g.h3_set) > 0
